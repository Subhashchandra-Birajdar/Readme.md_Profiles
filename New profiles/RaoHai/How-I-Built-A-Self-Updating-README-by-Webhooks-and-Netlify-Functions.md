# How I Built A Self-Updating README by Webhooks and Netlify Functions.

![image.png](https://cdn.nlark.com/yuque/0/2020/png/84204/1595206669063-20aafb8a-1867-4b27-a77d-72bd422072d1.png)<br />

<a name="oyCZK"></a>
## Generate README by Github Action
Github profile READMEs allowing users to create own content of REAMDE markdown file rendered at profile page.<br />
<br />Visit github.com/RaoHai and you'll see a list of posts. I do this with a Github Action in[ yuque.yml](https://github.com/RaoHai/RaoHai/blob/master/.github/workflows/yuque.yml), the workflow configured to run on every push event and [workflow_dispatch](https://docs.github.com/en/actions/reference/events-that-trigger-workflows#workflow_dispatch) event.<br />
<br />The action runs [actions/yuque-to-readme](https://github.com/marketplace/actions/yuque-to-readme), which take your yuque API token and retrieve your posts from yuque. Then read given template file, then generate README.md by handlebars:<br />

```markdown
<h2>Hi, I'm Rao Hai! <img src="https://github.githubassets.com/images/mona-whisper.gif" height="24" /></h2>
<img align='right' src="https://media.giphy.com/media/836HiJc7pgzy8iNXCn/giphy.gif" width="230" />
<p><em>Front-end Engineer at <a href="https://www.alipay.com/">Alipay</a> . </em>

<h4> Latest Blog Posts: </h4>

{{#each record}}
  - [{{title}}](https://yuque.com/{{@root.namespace}}/{{slug}}) - {{short created_at "MM-dd HH:mm"}}
{{/each}}

<p align="right"><a href="https://www.yuque.com/luchen/buzhou">➡️ More blog posts</a></p>
<p align="right">
  Generated by
  <a href="https://github.com/marketplace/actions/yuque-to-readme">actions/yuque-2-readme</a>
</p>

-----
<a href="https://github.com/RaoHai/RaoHai/workflows">
<img align="right" alt="Build README" src="https://github.com/RaoHai/RaoHai/workflows/yuque/badge.svg?branch=master" />
</a>
<a  href="https://www.yuque.com/luchen/buzhou/qqi7hq">
How this works
</a>
```
Whole scripts of yuque-to-readme is [here](https://github.com/RaoHai/yuque2Readme/blob/master/index.js).<br />It Also have a datoCms version [datocms-to-markdown](https://github.com/marketplace/actions/datocms-to-markdown), It'll generate README.md from given datoCMS project.<br />

<a name="DQN2U"></a>
## Scheduling Workflow via Webhooks
Although that Github Actions `schedule` event allows you to trigger a workflow at a scheduled time just like
```yaml
on:
  schedule:
    - cron:  '*/15 * * * *'

```
But I am skillfully doing this: yuque.com allows call a Webhook while a document area created or updated, so I hosted a [Netlify Functions](https://docs.netlify.com/functions/overview/) that exposed a Webhook API. <br />
<br />It dispatches a `workflow_dispatch` event by Github Api when it has been called. The `yuque.yml` workflow then scheduled.<br />
<br />![english.png](https://cdn.nlark.com/yuque/0/2020/png/84204/1595207774716-b6b05682-8516-463b-9d7d-927faf0b8774.png#align=left&display=inline&height=896&margin=%5Bobject%20Object%5D&name=english.png&originHeight=896&originWidth=1434&size=197088&status=done&style=none&width=1434)<br />

<a name="3y94z"></a>
## Conclusion
This post provides a solution for scheduling workflow using Webhooks in building Github profile READMEs. Considering this workflow runs very fast, so maybe trigger it at a scheduled time is a more simple way, depends on you. :D.
